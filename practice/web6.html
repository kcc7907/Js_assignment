<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            box-sizing: border-box;
        }

        input.card {
            width: 42px;
        }

        .-error {
            border: 1px solid red;
        }
    </style>
</head>

<body>
    <form action="#" method="#" id="the_form">

        <div class="group">
            <label>帳號：</label>
            <input type="text" id="account">
        </div>

        <div class="group">
            <label>email：</label>
            <input type="email" id="email">
        </div>

        <div class="group">
            <label>信用卡卡號：</label>
            <input type="text" class="card" maxlength="4">
            <input type="text" class="card" maxlength="4">
            <input type="text" class="card" maxlength="4">
            <input type="text" class="card" maxlength="4">
        </div>

        <div class="group">
            <label>商品數量：</label>
            <input type="range" min="1" max="10" value="5" class="product_count">
            <span class="num">5</span>
        </div>

        <div class="group">
            <button type="reset">清空</button>
            <button type="submit">資料送出</button>
        </div>

    </form>

    <script>
        // 介面調整：
        // 信用卡介面：keydown、keyup、focus
        // 商品數量的介面：mousemove、reset 事件
        // 資料送出時(submit)，資料驗證：
        // 帳號必填
        // email：符合格式
        // 信用卡卡號：符合格式
        document.addEventListener('DOMContentLoaded', function () {
            let cards = document.querySelectorAll('.card');
            for (let i = 0; i < cards.length; i++) {
                cards[i].addEventListener('keydown', function (e) {
                    console.log(e.which);

                    if (e.which >= 48 && e.which <= 57 || e.which == 8) {
                        if (e.target.value.length == 0 && e.which == 8) {
                            let preel = this.previousElementSibling;
                            if (preel != null) {
                                preel.focus();
                            }
                        }
                    } else {
                        e.preventDefault();
                    };
                });

                cards[i].addEventListener('keyup', function (e) {
                    let str = (e.target.value).replace(/\D/g, "");
                    e.target.value = str;
                    if (str.length == 4) {
                        let nextel = this.nextElementSibling;
                        if (nextel != null) {
                            nextel.focus();
                        }
                    }
                });
            };
            let product = document.querySelectorAll(".product_count")[0];
            product.addEventListener('mousemove', function () {
                document.querySelectorAll('.num')[0].innerHTML = this.value;
            });
            let tform = document.querySelector('#the_form');
            tform.addEventListener('reset', function () {
                document.querySelectorAll('.num')[0].innerHTML = 5;
            });
        });
    </script>
</body>

</html>